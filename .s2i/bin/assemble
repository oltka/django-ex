#!/bin/bash

set -eo pipefail

echo " -----> Upgrading Python packaging tools."
pip install -U pip setuptools wheel

echo " -----> Installing Python packages..."

REQUIREMENTS_FILE="${REQUIREMENTS_FILE:-requirements.txt}"

for file in $REQUIREMENTS_FILE; do
    if [ -f "$file" ]; then
        echo " -----> Processing package file: $file."
        pip install -r $file --wheel-dir /opt/app-root/wheelhouse
    else
        echo " -----> Skipping package file: $file."
    fi
done

echo " -----> Done."
